<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <link rel="icon" href="immagini/cryptIcon.png" type="image/x-icon">
        <title>Decripta</title>
    </head>
    <body background="immagini/sfondo.jpg">
        <div class="contenitore">
            <button class="back2" onclick="window.location.href='secretCript.html'"><b>Cripta un altro file</b></button>
            <h1>Decripta un file di testo</h1>
            <input type="text" id="inputChiave" class="inputChiave" placeholder="Inserisci la tua chiave" style="margin-left: 0px;">
            <button class="pulsanteCripta" onclick="decripta()"><b>Decripta</b></button>
            <table id="tabellaTesto">
                <tbody>
                </tbody>
            </table>
        </div>
    </body>
    <script>
        let testoCriptato = localStorage.getItem("TestoCriptato");
        const table = document.getElementById('tabellaTesto').getElementsByTagName('tbody')[0];
        let newRow = table.insertRow();
        let cellC = newRow.insertCell(0);
        cellC.textContent = testoCriptato;
        function decripta(){
            let testoDecriptato = "";
            let chiave = document.getElementById("inputChiave").value;
            chiave = parseInt(chiave);
            for (let i = 0; i < testoCriptato.length; i++){
                let carattere = testoCriptato.charAt(i);
                testoDecriptato += String.fromCharCode(carattere.charCodeAt(0) - chiave);
            }
            let cellD = newRow.insertCell(1);
            cellD.textContent = testoDecriptato;
        }
    </script>
</html>